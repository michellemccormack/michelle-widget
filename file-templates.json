{
  "src/lib/redis.ts": "import { Redis } from '@upstash/redis';\n\nif (!process.env.UPSTASH_REDIS_REST_URL || !process.env.UPSTASH_REDIS_REST_TOKEN) {\n  throw new Error('Missing Upstash Redis credentials');\n}\n\nexport const redis = new Redis({\n  url: process.env.UPSTASH_REDIS_REST_URL,\n  token: process.env.UPSTASH_REDIS_REST_TOKEN,\n});\n\nexport const CACHE_KEYS = {\n  faqs: 'faqs:all',\n  config: 'config:all',\n  embeddings: 'embeddings:all',\n  session: (sessionId: string) => `session:${sessionId}`,\n  rateLimit: (ip: string) => `rate:${ip}`,\n};\n\nexport const CACHE_TTL = {\n  faqs: 300,\n  config: 600,\n  embeddings: 3600,\n  session: 1800,\n};\n\nexport const cacheUtils = {\n  async getFAQs(): Promise<any[] | null> {\n    return redis.get(CACHE_KEYS.faqs);\n  },\n\n  async setFAQs(faqs: any[]): Promise<void> {\n    await redis.setex(CACHE_KEYS.faqs, CACHE_TTL.faqs, JSON.stringify(faqs));\n  },\n\n  async getConfig(): Promise<Record<string, string> | null> {\n    return redis.get(CACHE_KEYS.config);\n  },\n\n  async setConfig(config: Record<string, string>): Promise<void> {\n    await redis.setex(CACHE_KEYS.config, CACHE_TTL.config, JSON.stringify(config));\n  },\n\n  async getEmbeddings(): Promise<Array<{ id: string; embedding: number[] }> | null> {\n    return redis.get(CACHE_KEYS.embeddings);\n  },\n\n  async setEmbeddings(embeddings: Array<{ id: string; embedding: number[] }>): Promise<void> {\n    await redis.setex(CACHE_KEYS.embeddings, CACHE_TTL.embeddings, JSON.stringify(embeddings));\n  },\n\n  async invalidateAll(): Promise<void> {\n    await Promise.all([\n      redis.del(CACHE_KEYS.faqs),\n      redis.del(CACHE_KEYS.config),\n      redis.del(CACHE_KEYS.embeddings),\n    ]);\n  },\n};"
}